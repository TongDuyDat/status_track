# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Pipeline Mode Configuration
PIPELINE_MODE=staged
WORKER_BATCH_SIZE=16
BATCH_TIMEOUT=0.05
MAX_CONCURRENT_BATCHES=10
LOG_LEVEL=INFO

# Debug Mode (set true để lưu crop images - TỐN MEMORY!)
DEBUG_MODE=false

# App Configuration
APP_NAME=License Plate Recognition API
VERSION=2.0.0

# ===== MEMORY MANAGEMENT =====

# Memory Thresholds
RAM_THRESHOLD=0.85      # 85% RAM → trigger garbage collection
GPU_THRESHOLD=0.90      # 90% GPU memory → giảm batch size
MAX_QUEUE_SIZE=1000     # Max số items trong mỗi queue (backpressure)

# Batch Manager Limits
# Điều chỉnh theo GPU VRAM của bạn:
# 4GB VRAM: TRUCK=8,  TEXT=8,  OCR=16
# 6GB VRAM: TRUCK=16, TEXT=12, OCR=32
# 8GB VRAM: TRUCK=24, TEXT=16, OCR=48
# 12GB+:    TRUCK=32, TEXT=24, OCR=64

TRUCK_MAX_BATCH=32      # Max batch size cho truck detection
TEXT_MAX_BATCH=16       # Max batch size cho text detection
OCR_MAX_BATCH=64        # Max batch size cho OCR

# ===== PERFORMANCE TUNING =====

# High Throughput (High Memory)
# TRUCK_MAX_BATCH=32
# TEXT_MAX_BATCH=24
# OCR_MAX_BATCH=64
# MAX_QUEUE_SIZE=2000
# GPU_THRESHOLD=0.95
# → Throughput: 150-200 req/s, Memory: 85-95%

# Balanced (Recommended)
# TRUCK_MAX_BATCH=24
# TEXT_MAX_BATCH=16
# OCR_MAX_BATCH=48
# MAX_QUEUE_SIZE=1000
# GPU_THRESHOLD=0.85
# → Throughput: 100-120 req/s, Memory: 70-80%

# Low Memory (Low Throughput)
# TRUCK_MAX_BATCH=16
# TEXT_MAX_BATCH=8
# OCR_MAX_BATCH=32
# MAX_QUEUE_SIZE=500
# GPU_THRESHOLD=0.75
# → Throughput: 60-80 req/s, Memory: 50-60%
